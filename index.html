<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project: CHRONOS | Aethesi</title>
    <!-- PWA INTEGRATION: Link to the Manifest -->
    <link rel="manifest" href="manifest.json">
    <!-- PWA INTEGRATION: Theme Color for Browser UI -->
    <meta name="theme-color" content="#4c1d95"/>
    <!-- PWA INTEGRATION: Apple-specific icon and startup image (optional but recommended) -->
    <link rel="apple-touch-icon" href="icons/ios/192.png">
      <link rel="icon" type="image/png" href="time-bomb.png"/>
      <link rel="stylesheet" href="style.css">
    </head>

<body class="home-mode">
    <!-- NEW: The canvas for our celestial elements -->
    <div id="starfield-container"></div>

<header>
        <div id="brand-logo">Aethesi Protocol</div>
        <!-- The Ledger is now structurally part of the header -->
<div id="sprint-goal-tracker">
        <label for="sprint-goal-input">Daily Sprint Goal:</label>
        <span id="sprint-goal-display">0/0</span>
        <!-- NEW: Forged Number Input Wrapper -->
        <div class="number-input-wrapper">
            <button class="decrement" id="goal-decrement">-</button>
            <input type="number" id="sprint-goal-input" min="0">
            <button class="increment" id="goal-increment">+</button>
        </div>
    </div>
        <div id="sublimated-macro-container">
            <span id="macro-value"></span>
            <span id="macro-unit"></span>
            <span id="sublimated-target-date"></span>
        </div>
        <div id="realtime-clock"></div>
    </header>

    <main id="command-center">
<div id="display-area">
                <!-- NEW: The Mission Designator Armature -->
            <div id="task-name-container">
                <h2 id="task-name"></h2>
                <input type="text" id="task-name-input" autocomplete="off">
                <button id="edit-task-name-button" title="Edit Task Name">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.75,2.92L19,5.17l-1.41,1.41L15.34,4.34M13.93,18.89H5v-8.93l6.5-6.5l2.83,2.83l-6.5,6.5V17.5h2.83l6.5-6.5l2.83,2.83l-6.5,6.5Z"/></svg>
                </button>
            </div>
            <div id="timer-display">
                <div id="ripple-effect-container"></div>
                <div id="time-value" data-old-value=""></div> 
                <span id="time-unit"></span>
            </div>
<!-- NEW: The "Momentum Bar" Armature -->
            <div id="sprint-progress-bar-container">
                <div class="progress-bar-track">
                    <div class="progress-bar-fill"></div>
                </div>
                <div class="progress-percentage">0%</div>
            </div>
            <div id="target-date-display"></div>
            <!-- ADD THIS LINE TO RESTORE THE MISSION PROMPT -->
            <div id="mission-prompt">Start your mission now!</div>
            <div id="flow-quote-display"></div>
            <div id="adrenaline-prompt">There is no time to waste.</div>
        </div>
    </main>


    <!-- NEW: The AEGIS Mission Dossier Interface (Hidden by Default) -->
    <div id="aegis-dossier-overlay">
        <div class="dossier-form">
            <h1>Mission Dossier</h1>
            
            <div class="dossier-field">
                <label for="objective-name">Objective Designator:</label>
                <input type="text" id="objective-name" autocomplete="off">
            </div>

            <div class="dossier-field-group">
                <div class="dossier-field">
                    <label>Objective Class:</label>
                    <div class="aegis-toggle">
                        <input type="radio" id="class-strategic" name="objective-class" value="strategic" checked>
                        <label for="class-strategic">Strategic</label>
                        <input type="radio" id="class-tactical" name="objective-class" value="tactical">
                        <label for="class-tactical">Tactical</label>
                    </div>
                </div>
                <div class="dossier-field">
                    <label for="event-horizon">Event Horizon:</label>
                    <input type="date" id="event-horizon">
                </div>
            </div>

            <div class="dossier-field">
                <label>Scale:</label>
                <div class="aegis-chips">
                    <input type="radio" id="scale-epic" name="objective-scale" value="epic" checked><label for="scale-epic">Epic</label>
                    <input type="radio" id="scale-feature" name="objective-scale" value="feature"><label for="scale-feature">Feature</label>
                    <input type="radio" id="scale-task" name="objective-scale" value="task"><label for="scale-task">Task</label>
                </div>
            </div>

            <div class="dossier-field">
                <label>Narrative Frame:</label>
                <div class="aegis-chips">
                    <input type="radio" id="frame-main" name="narrative-frame" value="main" checked><label for="frame-main">Main Quest</label>
                    <input type="radio" id="frame-side" name="narrative-frame" value="side"><label for="frame-side">Side Quest</label>
                    <input type="radio" id="frame-recon" name="narrative-frame" value="recon"><label for="frame-recon">Recon</label>
                </div>
            </div>

            <div class="dossier-field">
                <label for="dossier-intel">Dossier Intel:</label>
                <textarea id="dossier-intel" rows="5" placeholder="Outline mission plan, desired outcome, and relevant asset links..."></textarea>
            </div>

            <div class="dossier-actions">
                <button id="abort-dossier-button">Abort</button>
                <button id="forge-mission-button">Forge Mission</button>
            </div>
        </div>
    </div>

    <div class="mode-switch">
        <input type="radio" id="mode-home" name="mode" value="home" checked>
        <label for="mode-home">Home</label>
        <input type="radio" id="mode-strategic" name="mode" value="strategic">
        <label for="mode-strategic">Strategic</label>
        <input type="radio" id="mode-tactical" name="mode" value="tactical">
        <label for="mode-tactical">Tactical</label>
        <div class="switch-slider"></div>
    </div>

    <div id="sprint-setup">
        <h4 id="sprint-prompt">Start a Sprint!</h4>
<div class="sprint-input-group">
            <!-- NEW: Forged Number Input Wrapper -->
            <div class="number-input-wrapper">
                <button class="decrement" id="sprint-decrement">-</button>
                <input type="number" id="sprint-duration-input" placeholder="MIN" min="1" max="180">
                <button class="increment" id="sprint-increment">+</button>
            </div>
            <button id="launch-sprint-button">LAUNCH</button>
        </div>
    </div>

    <div id="sprint-controls">
        <button id="cancel-sprint-button">Cancel [ESC]</button>
        <button id="complete-sprint-button">Mark as Complete [SHIFT+F]</button>
    </div>

    <!-- NEW: The Gateway to AEGIS -->
    <button id="log-objective-button">+ Log New Objective</button>

    <div id="fullscreen-toggle" title="Toggle Fullscreen">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path class="enter-fullscreen" d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 2h-2v3h-3v2h5v-5zm-3-2V5h-2v2h-3v2h5z"/>
            <path class="exit-fullscreen" d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>
        </svg>
    </div>
<!-- NEW: Post-Sprint Debriefing Layer -->
    <div id="post-sprint-overlay">
        <h1 id="post-sprint-message"></h1>
        <!-- NEW: Container for the progress report -->
        <p id="sprint-progress-display"></p>
    </div>
    <script src="script.js"></script>
    <!-- NEW: The Update Notification System -->
    <div id="update-notification">
        <span>A new version is available.</span>
        <button id="reload-button">RELOAD</button>
    </div>
</body>
</html>




